{% load static %}
{% get_static_prefix as STATIC_PREFIX %}
<!DOCTYPE HTML>
<html>
<head>
<title>Task Entries</title>
<script src='{{ STATIC_PREFIX }}resources/js/jquery-1.6.2.min.js' type='text/javascript'></script>
<script src='{{ STATIC_PREFIX }}resources/js/jquery-ui-1.8.16.custom.min.js' type='text/javascript'></script>
<script type='text/javascript'>
var content = $("div#content")
function startnew() {
	if ($("#newentry").length == 0) {
		$("#addbtn").hide()
		$("#main tbody").append("\
		<tr id='newentry' class='rowactive'>\
			<td class='colDate'>Now</td>\
			<td class='colSubj'>\
				<select id='subjects'>\
					{% for s in subjects %}<option value='{{s.id}}'>{{ s.name }}</option>\
					{% endfor %}\
				</select>\
			</td>\
			<td class='colTask'>\
				<select id='tasks'>\
					{% for t in tasks %}<option value='{{t.id}}'>{{ t.name }}</option>\
					{% endfor %}\
				</select>\
			</td>\
		</tr>")
	}
}
function TaskEntry(id){
	this.tr = $(id);
}
TaskEntry.prototype.activate = function() {
	content.append();
	content.show("drop")
}
</script>
<style type='text/css'>
	div.clear { clear:both; }
	body {
		font-family:sans;
		font-size:10pt;
	}
	#addbtn { margin:0.5em;padding:0.2em;}
	div#table { float:left; }
	table#main { 
		border-collapse:collapse;
		border-color:#CCC;
	}
	table#main td{
		padding:0.5em;
		border-bottom:1px solid;
		border-color:inherit;
	}
	table#main th {
		padding:0.8em;
		border-bottom:1px solid;
		border-color:inherit;
	}
	table#main tr {
		cursor:pointer;
	}
	table#main tbody>tr:hover {
		background:#CCC;
	}
	.colDate {	min-width:150px;}
	.colSubj {	min-width:100px;}
	.colTask {	min-width:100px;}
	.rowactive td { 
		position:relative; 
		z-index:10;
		background-color:white;
	}
	div#content { 
		display:none;
		float:left; 
		border-left:1px solid;
		margin-left:-1px;
	}
</style>
</head>
<body>
	<div id='table'>
	<table id='main'>
		<thead>
		<tr><th class='colDate'>Date</th><th class='colSubj'>Who</th><th class='colTask'>Task</th></tr>
		</thead>
		<tbody>
		{% for e in entries %}
			<tr><td class='colDate'>{{e.date}}</td>
			<td class='colSubj'>{{e.subject.name}}</td>
			<td class='colTask'>{{e.task.name}}</td></tr>
		{% endfor %}
		</tbody>
	</table>
	<input id='addbtn' type='button' value='Add new entry' onclick='startnew()' />
	</div>
	<div id='content'>
	</div>
</body>
</html>